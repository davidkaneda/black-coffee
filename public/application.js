((function(){if(!this.require){var a={},b={},c=function(f,g){var h=d(g,f),i=d(h,"./index"),j,k;j=b[h]||b[i];if(j)return j;if(k=a[h]||a[h=i])return j={id:h,exports:{}},b[h]=j.exports,k(j.exports,function(a){return c(a,e(h))},j),b[h]=j.exports;throw"module "+f+" not found"},d=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e==".."?c.pop():e!="."&&e!=""&&c.push(e);return c.join("/")},e=function(a){return a.split("/").slice(0,-1).join("/")};this.require=function(a){return c(a,"")},this.require.define=function(b){for(var c in b)a[c]=b[c]},this.require.modules=a,this.require.cache=b}return this.require.define})).call(this)({"spine/index":function(a,b,c){c.exports=b("./lib/spine")},"spine/lib/spine":function(a,b,c){((function(){var a,b,d,e,f,g,h,i,j,k,l,m,n=Array.prototype.slice,o=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},p=function(a,b){return function(){return a.apply(b,arguments)}},q=Object.prototype.hasOwnProperty,r=function(a,b){function d(){this.constructor=a}for(var c in b)q.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d={bind:function(a,b){var c,d,e,f,g;d=a.split(" "),c=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={});for(f=0,g=d.length;f<g;f++)e=d[f],c[e]||(c[e]=[]),c[e].push(b);return this},one:function(a,b){return this.bind(a,function(){return this.unbind(a,arguments.callee),b.apply(this,arguments)})},trigger:function(){var a,b,c,d,e,f,g;a=1<=arguments.length?n.call(arguments,0):[],c=a.shift(),d=this.hasOwnProperty("_callbacks")&&((g=this._callbacks)!=null?g[c]:void 0);if(!d)return!1;for(e=0,f=d.length;e<f;e++){b=d[e];if(b.apply(this,a)===!1)break}return!0},unbind:function(a,b){var c,d,e,f,g;if(!a)return this._callbacks={},this;e=(g=this._callbacks)!=null?g[a]:void 0;if(!e)return this;if(!b)return delete this._callbacks[a],this;for(d=0,f=e.length;d<f;d++){c=e[d];if(c===b){e=e.slice(),e.splice(d,1),this._callbacks[a]=e;break}}return this}},e={trace:!0,logPrefix:"(App)",log:function(){var a;a=1<=arguments.length?n.call(arguments,0):[];if(!this.trace)return;if(typeof console=="undefined")return;return this.logPrefix&&a.unshift(this.logPrefix),console.log.apply(console,a),this}},m=["included","extended"],g=function(){function a(){typeof this.init=="function"&&this.init.apply(this,arguments)}return a.include=function(a){var b,c,d;if(!a)throw"include(obj) requires obj";for(c in a)d=a[c],o.call(m,c)<0&&(this.prototype[c]=d);return b=a.included,b&&b.apply(this),this},a.extend=function(a){var b,c,d;if(!a)throw"extend(obj) requires obj";for(c in a)d=a[c],o.call(m,c)<0&&(this[c]=d);return b=a.extended,b&&b.apply(this),this},a.proxy=function(a){return p(function(){return a.apply(this,arguments)},this)},a.prototype.proxy=function(a){return p(function(){return a.apply(this,arguments)},this)},a}(),f=function(){function b(a){b.__super__.constructor.apply(this,arguments),this.ids=[],a&&this.load(a)}return r(b,g),b.extend(d),b.records={},b.attributes=[],b.configure=function(){var a,b;return b=arguments[0],a=2<=arguments.length?n.call(arguments,1):[],this.className=b,this.records={},a.length&&(this.attributes=a),this.attributes&&(this.attributes=l(this.attributes)),this.attributes||(this.attributes=[]),this.unbind(),this},b.toString=function(){return""+this.className+"("+this.attributes.join(", ")+")"},b.find=function(a){var b;b=this.records[a];if(!b)throw"Unknown record";return b.clone()},b.exists=function(a){try{return this.find(a)}catch(b){return!1}},b.refresh=function(a,b){var c,d,e,f;b==null&&(b={}),b.clear&&(this.records={}),d=this.fromJSON(a),j(d)||(d=[d]);for(e=0,f=d.length;e<f;e++)c=d[e],c.newRecord=!1,c.id||(c.id=i()),this.records[c.id]=c;return this.trigger("refresh",!b.clear&&d),this},b.select=function(a){var b,c,d;return d=function(){var d,e;d=this.records,e=[];for(b in d)c=d[b],a(c)&&e.push(c);return e}.call(this),this.cloneArray(d)},b.findByAttribute=function(a,b){var c,d,e;e=this.records;for(c in e){d=e[c];if(d[a]===b)return d.clone()}return null},b.findAllByAttribute=function(a,b){return this.select(function(c){return c[a]===b})},b.each=function(a){var b,c,d,e;d=this.records,e=[];for(b in d)c=d[b],e.push(a(c.clone()));return e},b.all=function(){return this.cloneArray(this.recordsValues())},b.first=function(){var a;return a=this.recordsValues()[0],a!=null?a.clone():void 0},b.last=function(){var a,b;return b=this.recordsValues(),a=b[b.length-1],a!=null?a.clone():void 0},b.count=function(){return this.recordsValues().length},b.deleteAll=function(){var a,b,c,d;c=this.records,d=[];for(a in c)b=c[a],d.push(delete this.records[a]);return d},b.destroyAll=function(){var a,b,c,d;c=this.records,d=[];for(a in c)b=c[a],d.push(this.records[a].destroy());return d},b.update=function(a,b){return this.find(a).updateAttributes(b)},b.create=function(a){var b;return b=new this(a),b.save()},b.destroy=function(a){return this.find(a).destroy()},b.change=function(a){return typeof a=="function"?this.bind("change",a):this.trigger("change",a)},b.fetch=function(a){return typeof a=="function"?this.bind("fetch",a):this.trigger("fetch",a)},b.toJSON=function(){return this.recordsValues()},b.fromJSON=function(a){var b,c,d,e;if(!a)return;typeof a=="string"&&(a=JSON.parse(a));if(j(a)){e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(new this(b));return e}return new this(a)},b.fromForm=function(){var a;return(a=new this).fromForm.apply(a,arguments)},b.recordsValues=function(){var a,b,c,d;b=[],d=this.records;for(a in d)c=d[a],b.push(c);return b},b.cloneArray=function(a){var b,c,d,e;e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(b.clone());return e},b.prototype.newRecord=!0,b.prototype.isNew=function(){return this.newRecord},b.prototype.isValid=function(){return!this.validate()},b.prototype.validate=function(){},b.prototype.load=function(a){var b,c;for(b in a)c=a[b],typeof this[b]=="function"?this[b](c):this[b]=c;return this},b.prototype.attributes=function(){var a,b,c,d,e;b={},e=this.constructor.attributes;for(c=0,d=e.length;c<d;c++)a=e[c],a in this&&(typeof this[a]=="function"?b[a]=this[a]():b[a]=this[a]);return this.id&&(b.id=this.id),b},b.prototype.eql=function(a){var b,c;return a&&a.constructor===this.constructor&&(a.id===this.id||(b=this.id,o.call(a.ids,b)>=0)||(c=a.id,o.call(this.ids,c)>=0))},b.prototype.save=function(){var a,b;return a=this.validate(),a?(this.trigger("error",a),!1):(this.trigger("beforeSave"),b=this.newRecord?this.create():this.update(),this.trigger("save"),b)},b.prototype.updateAttribute=function(a,b){return this[a]=b,this.save()},b.prototype.updateAttributes=function(a){return this.load(a),this.save()},b.prototype.changeID=function(a){var b;return this.ids.push(this.id),b=this.constructor.records,b[a]=b[this.id],delete b[this.id],this.id=a,this.save()},b.prototype.destroy=function(){return this.trigger("beforeDestroy"),delete this.constructor.records[this.id],this.destroyed=!0,this.trigger("destroy"),this.trigger("change","destroy"),this.unbind(),this},b.prototype.dup=function(a){var b;return b=new this.constructor(this.attributes()),a===!1?b.newRecord=this.newRecord:delete b.id,b},b.prototype.clone=function(){return Object.create(this)},b.prototype.reload=function(){var a;return this.newRecord?this:(a=this.constructor.find(this.id),this.load(a.attributes()),a)},b.prototype.toJSON=function(){return this.attributes()},b.prototype.toString=function(){return"<"+this.constructor.className+" ("+JSON.stringify(this)+")>"},b.prototype.fromForm=function(b){var c,d,e,f,g;d={},g=a(b).serializeArray();for(e=0,f=g.length;e<f;e++)c=g[e],d[c.name]=c.value;return this.load(d)},b.prototype.exists=function(){return this.id&&this.id in this.constructor.records},b.prototype.update=function(){var a,b;return this.trigger("beforeUpdate"),b=this.constructor.records,b[this.id].load(this.attributes()),a=b[this.id].clone(),a.trigger("update"),a.trigger("change","update"),a},b.prototype.create=function(){var a,b;return this.trigger("beforeCreate"),this.id||(this.id=i()),this.newRecord=!1,b=this.constructor.records,b[this.id]=this.dup(!1),a=b[this.id].clone(),a.trigger("create"),a.trigger("change","create"),a},b.prototype.bind=function(a,b){var c,d;return this.constructor.bind(a,c=p(function(a){if(a&&this.eql(a))return b.apply(this,arguments)},this)),this.constructor.bind("unbind",d=p(function(b){if(b&&this.eql(b))return this.constructor.unbind(a,c),this.constructor.unbind("unbind",d)},this)),c},b.prototype.trigger=function(){var a,b;return a=1<=arguments.length?n.call(arguments,0):[],a.splice(1,0,this),(b=this.constructor).trigger.apply(b,a)},b.prototype.unbind=function(){return this.trigger("unbind")},b}(),b=function(){function b(c){this.release=p(this.release,this);var d,e,f;this.options=c,f=this.options;for(d in f)e=f[d],this[d]=e;this.el||(this.el=document.createElement(this.tag)),this.el=a(this.el),this.className&&this.el.addClass(this.className),this.release(function(){return this.el.remove()}),this.events||(this.events=this.constructor.events),this.elements||(this.elements=this.constructor.elements),this.events&&this.delegateEvents(),this.elements&&this.refreshElements(),b.__super__.constructor.apply(this,arguments)}return r(b,g),b.include(d),b.include(e),b.prototype.eventSplitter=/^(\S+)\s*(.*)$/,b.prototype.tag="div",b.prototype.release=function(a){return typeof a=="function"?this.bind("release",a):this.trigger("release")},b.prototype.$=function(b){return a(b,this.el)},b.prototype.delegateEvents=function(){var a,b,c,d,e,f,g;f=this.events,g=[];for(b in f)d=f[b],typeof d!="function"&&(d=this.proxy(this[d])),c=b.match(this.eventSplitter),a=c[1],e=c[2],g.push(e===""?this.el.bind(a,d):this.el.delegate(e,a,d));return g},b.prototype.refreshElements=function(){var a,b,c,d;c=this.elements,d=[];for(a in c)b=c[a],d.push(this[b]=this.$(a));return d},b.prototype.delay=function(a,b){return setTimeout(this.proxy(a),b||0)},b.prototype.html=function(a){return this.el.html(a.el||a),this.refreshElements(),this.el},b.prototype.append=function(){var a,b,c;return b=1<=arguments.length?n.call(arguments,0):[],b=function(){var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(a.el||a);return e}(),(c=this.el).append.apply(c,b),this.refreshElements(),this.el},b.prototype.appendTo=function(a){return this.el.appendTo(a.el||a),this.refreshElements(),this.el},b.prototype.prepend=function(){var a,b,c;return b=1<=arguments.length?n.call(arguments,0):[],b=function(){var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(a.el||a);return e}(),(c=this.el).prepend.apply(c,b),this.refreshElements(),this.el},b.prototype.replace=function(a){var b,c;return c=[this.el,a.el||a],b=c[0],this.el=c[1],b.replaceWith(this.el),this.delegateEvents(),this.refreshElements(),this.el},b}(),a=this.jQuery||this.Zepto||function(a){return a},typeof Object.create!="function"&&(Object.create=function(a){var b;return b=function(){},b.prototype=a,new b}),j=function(a){return Object.prototype.toString.call(a)==="[object Array]"},k=function(a){var b;if(!a)return!0;for(b in a)return!1;return!0},l=function(a){return Array.prototype.slice.call(a,0)},i=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b,c;return b=Math.random()*16|0,c=a==="x"?b:b&3|8,c.toString(16)}).toUpperCase()},h=this.Spine={},typeof c!="undefined"&&c!==null&&(c.exports=h),h.version="1.0.3",h.isArray=j,h.isBlank=k,h.$=a,h.Events=d,h.Log=e,h.Module=g,h.Controller=b,h.Model=f,g.extend.call(h,d),g.create=g.sub=b.create=b.sub=f.sub=function(a,b){var c;return c=function(){function a(){a.__super__.constructor.apply(this,arguments)}return r(a,this),a}.call(this),a&&c.include(a),b&&c.extend(b),typeof c.unbind=="function"&&c.unbind(),c},f.setup=function(a,b){var c;return b==null&&(b=[]),c=function(){function a(){a.__super__.constructor.apply(this,arguments)}return r(a,this),a}.call(this),c.configure.apply(c,[a].concat(n.call(b))),c},g.init=b.init=f.init=function(a,b,c,d,e){return new this(a,b,c,d,e)},h.Class=g})).call(this)},"controllers/house":function(a,b,c){((function(){var a,d,e,f,g=Object.prototype.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};f=b("spine"),e=b("models/shoe"),d=b("controllers/player"),a=function(){function a(){this.players.push(new d({name:"Dave"})),this.players.push(new d({name:"JoAnne"})),this.dealer=new d({name:"Dealer"}),this.shoe=new e({decks:this.settings.deckSize}),this.log("Shuffling shoe with "+this.shoe.cards.length+" cards ("+this.settings.deckSize+" decks)"),this.log(this.shoe),this.deal(),a.__super__.constructor.apply(this,arguments)}return h(a,f.Controller),a.extend(f.Events),a.prototype.settings={deckSize:6},a.prototype.discarded=[],a.prototype.players=[],a.prototype.rules={standOnSoft17:!0,insurancePays2to1:!0},a.prototype.log=function(a){return console.log(a)},a.prototype.deal=function(){var a,b,c,d,e,f,g,h;this.log("=== house.deal ==="),g=[1,2];for(c=0,e=g.length;c<e;c++){a=g[c],h=this.players;for(d=0,f=h.length;d<f;d++)b=h[d],this.dealCardToPlayer(b);this.dealCardToSelf(a)}return this.dealer.hand[1].value===10&&this.checkForBlackjack(),this.log("The running count is "+this.shoe.runningCount),this.play()},a.prototype.play=function(){var a,b,c,d,e;this.log("=== house.play ==="),d=this.players,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],this.log("It is "+a.name+"'s turn."),e.push(a.takeTurn(this.dealer.hand[1].value));return e},a.prototype.dealCardToPlayer=function(a){var b;return b=this.shoe.drawCard(),a.hand.push(b),this.log("Dealing the "+(b.shortName+b.shortSuit)+" to "+a.name+".")},a.prototype.dealCardToSelf=function(a){var b;return b=this.shoe.drawCard({facedown:!0}),this.dealer.hand.push(b),this.log(a!==1?"Dealing the "+(b.shortName+b.shortSuit)+" to the dealer.":"Dealing face down to dealer."),b},a.prototype.checkForBlackjack=function(){return this.log("Checking for Blackjack..."),this.dealer.hand[0].value===11?this.log("Dealer has Blackjack :("):this.log("Nobody home.")},a.prototype.bettingRound=function(){},a}(),c.exports=a})).call(this)},"controllers/player":function(a,b,c){((function(){var a,d,e,f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("spine"),d=b("controllers/player_controls"),a=function(){function a(){var b;b=new d,this.hand=[],a.__super__.constructor.apply(this,arguments)}return g(a,e.Controller),a.prototype.handHistory=[],a.prototype.totalvalue=0,a.prototype.canSplit=!1,a.takingTurn=!0,a.prototype.strategy=[[1,1,1,1,1,1,1,1,1,1],[1,3,3,3,1,1,1,1,1,1],[3,3,3,3,3,3,3,3,1,1],[3,3,3,3,3,3,3,3,3,1],[1,1,2,2,2,1,1,1,1,1],[2,2,2,2,2,1,1,1,1,1],[2,2,2,2,2,1,1,1,1,1],[2,2,2,2,2,1,1,1,6,1],[2,2,2,2,2,1,1,6,6,6],[2,2,2,2,2,2,2,2,2,2],[1,1,1,3,3,1,1,1,1,1],[1,1,1,3,3,1,1,1,1,1],[1,1,3,3,3,1,1,1,1,1],[1,1,3,3,3,1,1,1,1,1],[1,3,3,3,3,1,1,1,1,1],[2,3,3,3,3,2,2,1,1,1],[2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2],[5,5,4,4,4,4,1,1,1,1],[5,5,4,4,4,4,1,1,1,1],[1,1,1,5,5,1,1,1,1,1],[3,3,3,3,3,3,3,3,1,1],[5,4,4,4,4,1,1,1,1,1],[4,4,4,4,4,4,1,1,1,1],[4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,2,4,4,2,2],[2,2,2,2,2,2,2,2,2,2],[4,4,4,4,4,4,4,4,4,4]],a.prototype.takeTurn=function(a){var b,c,d,e,f;this.dealercard=a,this.takingTurn=!0,f=this.hand;for(d=0,e=f.length;d<e;d++)c=f[d],this.totalvalue+=c.value;this.hand[0].value===this.hand[1].value&&(this.canSplit=!0);if(this.hand[0].value===11||this.hand[1].value===11)this.hasAce=!0;this.log(""+this.name+" has "+(this.totalvalue!==21?this.totalvalue+(this.hasAce?" (soft)":""):"Blackjack!")+", dealer showing a "+this.dealercard,this.hand);if(this.totalvalue===21)return;this.canSplit?b=this.strategy[16+this.totalvalue/2][a-2]:this.hasAce?b=this.strategy[this.totalvalue-1][a-2]:this.totalvalue<8?b=1:this.totalvalue>17?b=2:b=this.strategy[this.totalvalue-8][a-2];switch(b){case 1:return this.log("You should hit.");case 2:return this.log("You should stand.");case 3:return this.log("You should double down.");case 4:case 5:return this.log("You should split.");case 6:return this.log("You should surrender.")}},a}(),c.exports=a})).call(this)},"controllers/player_controls":function(a,b,c){((function(){var a,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("spine"),a=function(){function a(){a.__super__.constructor.apply(this,arguments)}return f(a,d.Controller),a.prototype.el=$(".player-controls"),a.prototype.events={'click input[value="hit"]':function(){return this.log("WOOT")}},a}(),c.exports=a})).call(this)},index:function(a,b,c){((function(){var a,d,e,f,g,h=Object.prototype.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b("lib/setup"),d=b("models/deck"),g=b("spine"),f=b("models/shoe"),e=b("controllers/house"),a=function(){function a(){this.house=new e,a.__super__.constructor.apply(this,arguments)}return i(a,g.Controller),a}(),c.exports=a})).call(this)},"lib/setup":function(a,b,c){((function(){var a,c=Array.prototype.slice;a=b("spine"),a.Controller.prototype.log=function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],console.log.apply(console,a)}})).call(this)},"models/card":function(a,b,c){((function(){var a,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("spine"),a=function(){function a(){a.__super__.constructor.apply(this,arguments);switch(this.index){case 1:this.shortName="A";break;case 13:this.shortName="K";break;case 12:this.shortName="Q";break;case 11:this.shortName="J";break;default:this.shortName=this.index}switch(this.index){case 13:case 12:case 11:this.value=10;break;case 1:this.value=11;break;default:this.value=this.index}this.shortSuit=this.suit[0],this.longName=this.shortName+" ("+this.suit+")"}return f(a,d.Model),a.configure("Card","index","value","suit","name","shortSuit","shortName"),a}(),c.exports=a})).call(this)},"models/deck":function(a,b,c){((function(){var a,d,e,f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("spine"),a=b("models/card"),d=function(){function b(){var c,d,e,f,g;g=["hearts","diamonds","spades","clubs"];for(e=0,f=g.length;e<f;e++){d=g[e];for(c=1;c<=13;c++)this.cards.push(new a({index:c,suit:d}))}b.__super__.constructor.apply(this,arguments)}return g(b,e.Model),b.configure("Deck","cards"),b.prototype.cards=[],b}(),c.exports=d})).call(this)},"models/shoe":function(a,b,c){((function(){var a,d,e,f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("spine"),a=b("models/deck"),d=function(){function b(c){var d,e;this.decks=c.decks;for(d=1,e=this.decks;1<=e?d<=e:d>=e;1<=e?d++:d--)this.cards=(new a).cards;this.preShuffle&&this.shuffle(),b.__super__.constructor.apply(this,arguments)}return g(b,e.Model),b.configure("Shoe","cards","decks"),b.prototype.cards=[],b.prototype.decks=6,b.prototype.preShuffle=!0,b.prototype.runningCount=0,b.prototype.shuffle=function(){return this.cards.sort(function(){return.5-Math.random()})},b.prototype.drawCard=function(){var a;return a=this.cards.pop(),9<a.value||a.value===1?this.runningCount--:a.value<7&&this.runningCount++,a},b}(),c.exports=d})).call(this)}})